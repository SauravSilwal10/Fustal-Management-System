{% extends 'main_admin.html' %}
{% load static %}
{% block title %}
    Manage Users
{% endblock %}

{% block links %}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.css">
{% endblock %}

{% block script %}
    <script src="https://unpkg.com/jquery@3.3.1/dist/jquery.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.js"></script>
    <script>
        $(document).ready(function(){
            $("#listtable").DataTable();
        })
    </script>
{% endblock %}

{% block label %}
    Users
{% endblock%}

{% block content %}
<table class="table table-bordered" id="listtable">
    <thead>
        <tr>
            <th>Name</th>
            <th>Username</th>
            <th>Email</th>
            <th>Date Joined</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for users in user_list %}
            <tr>
                <td>{{ users.first_name }} {{ users.last_name }}</td>
                <td>{{ users.username }}</td>
                <td>{{ users.email }}</td>
                <td>{{ users.date_joined }}</td>
                <td><a href="{% url 'users-list' %}{{users.id}}">Edit</a>
                    &nbsp;&nbsp;&nbsp;&nbsp; <a
                        href="">Delete</a></td>
            </tr>
        {% endfor %}
    </tbody>
</table>
{% for message in messages %}
        <div class="error-messages">
          <p class="error">{{message}} </p>
        </div>
      {% endfor %}

      <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous">
      </script>

<script text="javascript">
    setTimeout(fade_out, 2000);
    function fade_out() {
        $(".error-messages").fadeOut().empty();
    }
    $(".post-form")[0].reset(); // this is to reset the form 
</script>
{% endblock %}